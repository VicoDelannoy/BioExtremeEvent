<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>3. bis. Check how much corrected extreme events differ from raw extreme days. • BioExtremeEvent</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js" integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g==" crossorigin="anonymous" referrerpolicy="no-referrer"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="3. bis. Check how much corrected extreme events differ from raw extreme days.">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">


    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">BioExtremeEvent</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">0.0.900</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../articles/BioExtremeEvent.html">Get started</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles

    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/calc_baseline.html">1. Compute a baseline value</a>
    </li>
    <li>
      <a href="../articles/calc_binarize.html">2. Compare a time serie with the baseline or fixed threshold</a>
    </li>
    <li>
      <a href="../articles/calc_celsius.html">0.bis. Convert temperature data to Celsius</a>
    </li>
    <li>
      <a href="../articles/calc_corrections.html">3. bis. Check how much corrected extreme events differ from raw extreme days.</a>
    </li>
    <li>
      <a href="../articles/calc_true_event.html">3. Identify extreme event according specific constraints</a>
    </li>
    <li>
      <a href="../articles/data_load_corpernicus.html">0. Dowload data from Copernicus</a>
    </li>
  </ul>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/VicoMarbec/BioExtremeEvent/" class="external-link">
    <span class="fab fa-github fa-lg"></span>

  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->



      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>3. bis. Check how much corrected extreme events
differ from raw extreme days.</h1>
                        <h4 data-toc-skip class="author">Victoria
Delannoy, Nicolas Loiseau, Sébastien Villéger</h4>
            
      
      <small class="dont-index">Source: <a href="https://github.com/VicoMarbec/BioExtremeEvent/blob/main/vignettes/calc_corrections.Rmd" class="external-link"><code>vignettes/calc_corrections.Rmd</code></a></small>
      <div class="hidden name"><code>calc_corrections.Rmd</code></div>

    </div>

    
    
<div class="section level2">
<h2 id="aims-of-the-function-bee-calc-corrections-">Aims of the function <em>BEE.calc.corrections()</em>.<a class="anchor" aria-label="anchor" href="#aims-of-the-function-bee-calc-corrections-"></a>
</h2>
<p>The function compares former binarized value to corrected binarized
value. It takes as argument the two element of
<em>BEE.calc.true_event()</em> output. It is a quick way of testing the
implications of various settings in <em>BEE.calc.true_event()</em>.</p>
</div>
<div class="section level2">
<h2 id="usage">Usage<a class="anchor" aria-label="anchor" href="#usage"></a>
</h2>
<div class="section level3">
<h3 id="arguments">Arguments:<a class="anchor" aria-label="anchor" href="#arguments"></a>
</h3>
<p><strong>true_event_raster</strong> The first element of the
<em>BEE.calc.true_event()</em> ouput, which is a spatraster binarized
that inclued the corrections made by
<em>BEE.calc.true_event()</em>.<br><strong>true_event_df</strong> The second element of the
<em>BEE.calc.true_event()</em> ouput, which is a list of data.table
containing information about the value of each pixel before and after
definition criteria are applied to distinguish isolated extreme days
from extreme events.<br><strong>plot</strong> Accepted values are TRUE of FALSE. Set to “FALSE”
to not display the graphs.</p>
</div>
<div class="section level3">
<h3 id="warnings">Warnings:<a class="anchor" aria-label="anchor" href="#warnings"></a>
</h3>
<p>No warning implemented yet.<br>
## Messages: A message will be sent out providing basic information on
the number of days that have been reclassified as part of an extreme
event, or excluded from one.</p>
</div>
<div class="section level3">
<h3 id="output">Output<a class="anchor" aria-label="anchor" href="#output"></a>
</h3>
<p>The output is a data frame containing one row for each combination of
date and pixel. It contains the count of corrections from 1 to 0 and
from 0 to 1, which are provided in case users want to run their own
tests. However, the main interest lies in the plots that are created by
the function.<br>
The first plot shows the cumulative percentage of values that have been
modified amongst all non-NA values over time. This allows us to
visualise whether the corrections are homogeneous over time. If so, the
lines drawn should be straight. The same graph also allows you to check
whether a similar percentage of non-NA values have been changed to 1 and
to 0.<br>
The second graph allows you to check whether the corrections are
homogeneous across the area. It plots the studied area and shows the
difference between the number extreme days that have been added and the
number extreme days that have been withdrawn, for each pixel. If a pixel
value is negative, it means that, over the entire time period, more
extreme days have been removed than added for that pixel.</p>
</div>
</div>
<div class="section level2">
<h2 id="examples">Examples<a class="anchor" aria-label="anchor" href="#examples"></a>
</h2>
<div class="section level3">
<h3 id="load-data">Load data:<a class="anchor" aria-label="anchor" href="#load-data"></a>
</h3>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/VicoMarbec/BioExtremeEvent" class="external-link">BioExtremeEvent</a></span><span class="op">)</span></span>
<span><span class="co">#Binarized spatraster corrected built using BEE.calc.true_event()</span></span>
<span><span class="va">file_name_1</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/file.path.html" class="external-link">file.path</a></span><span class="op">(</span><span class="st">"extdata"</span>, <span class="st">"binarized_corrected_spatraster.tiff"</span><span class="op">)</span>,</span>
<span>                                   package <span class="op">=</span> <span class="st">"BioExtremeEvent"</span><span class="op">)</span></span>
<span><span class="va">binarized_corrected_spatraster</span> <span class="op">&lt;-</span> <span class="fu">terra</span><span class="fu">::</span><span class="fu"><a href="https://rspatial.github.io/terra/reference/rast.html" class="external-link">rast</a></span><span class="op">(</span><span class="va">file_name_1</span><span class="op">)</span></span>
<span><span class="co">#List of dataframe containning information about former and corrected binarised values, built using BEE.calc.true_event()</span></span>
<span><span class="va">file_name_2</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/file.path.html" class="external-link">file.path</a></span><span class="op">(</span><span class="st">"extdata"</span>, <span class="st">"binarized_corrected_df.rds"</span><span class="op">)</span>,</span>
<span>                                   package <span class="op">=</span> <span class="st">"BioExtremeEvent"</span><span class="op">)</span></span>
<span><span class="va">binarized_corrected_df</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rspatial.github.io/terra/reference/serialize.html" class="external-link">readRDS</a></span><span class="op">(</span><span class="va">file_name_2</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="see-how-the-extreme-event-definition-used-in-article-3--identify-extreme-event-according-specific-constraints--has-modified-the-number-of-extreme-days-">See how the extreme event definition used in article <em>3. Identify
extreme event according specific constraints.</em> has modified the
number of extreme days.<a class="anchor" aria-label="anchor" href="#see-how-the-extreme-event-definition-used-in-article-3--identify-extreme-event-according-specific-constraints--has-modified-the-number-of-extreme-days-"></a>
</h3>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">df_count_modif</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/BEE.calc.corrections.html">BEE.calc.corrections</a></span><span class="op">(</span>true_event_raster <span class="op">=</span> <span class="va">binarized_corrected_spatraster</span>,</span>
<span>                                       true_event_df_list <span class="op">=</span> <span class="va">binarized_corrected_df</span>,</span>
<span>                                       plot <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## Number of 0 corrected to 1: 25</span></span>
<span><span class="co">## Number of 1 corrected to 0: 26803</span></span>
<span><span class="co">## Percentage of non NA values corrected from 0 to 1: 0.00664102346140768</span></span>
<span><span class="co">## Percentage of non NA values corrected from 1 to 0: 7.11997407344441</span></span>
<span><span class="co">## 7.12661509690582 % of the non NA values have been modified.</span></span></code></pre>
<pre><code><span><span class="co">## Warning: Using `size` aesthetic for lines was deprecated in ggplot2 3.4.0.</span></span>
<span><span class="co">## <span style="color: #00BBBB;">ℹ</span> Please use `linewidth` instead.</span></span>
<span><span class="co">## <span style="color: #00BBBB;">ℹ</span> The deprecated feature was likely used in the <span style="color: #0000BB;">BioExtremeEvent</span> package.</span></span>
<span><span class="co">##   Please report the issue at</span></span>
<span><span class="co">##   <span style="color: #0000BB; font-style: italic;">&lt;https://github.com/VicoMarbec/BioExtremeEvent/issues&gt;</span>.</span></span>
<span><span class="co">## <span style="color: #555555;">This warning is displayed once per session.</span></span></span>
<span><span class="co">## <span style="color: #555555;">Call `lifecycle::last_lifecycle_warnings()` to see where this warning was</span></span></span>
<span><span class="co">## <span style="color: #555555;">generated.</span></span></span></code></pre>
<p><img src="calc_corrections_files/figure-html/unnamed-chunk-1-1.png" class="r-plt" alt="" width="700"><img src="calc_corrections_files/figure-html/unnamed-chunk-1-2.png" class="r-plt" alt="" width="700"></p>
</div>
<div class="section level3">
<h3 id="how-to-save-the-ouputs">How to save the ouputs:<a class="anchor" aria-label="anchor" href="#how-to-save-the-ouputs"></a>
</h3>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/write.table.html" class="external-link">write.csv</a></span><span class="op">(</span><span class="va">df_count_modif</span>, file <span class="op">=</span> <span class="st">"your_path/data/df_count_modif.csv"</span><span class="op">)</span></span></code></pre></div>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

      </div>

</div>



      <footer><div class="copyright">
  <p></p>
<p>Developed by Victoria Delannoy.</p>
</div>

<div class="pkgdown">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.2.0.</p>
</div>

      </footer>
</div>






  </body>
</html>
